<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>hi2code - 使用Zola搭建博客</title>

      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https://hi2code.github.io/blog/site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">hi2code</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog">hi2code</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    


<div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content always-active">
        <nav id="TableOfContents">
            <ul>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#jie-shao" class="toc-link">介绍</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#an-zhuang-zola" class="toc-link">安装 Zola</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#chu-shi-hua-xiang-mu" class="toc-link">初始化项目</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#an-zhuang-zhu-ti" class="toc-link">安装主题</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#ben-di-cha-kan" class="toc-link">本地查看</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#she-zhi-yuan-cheng-cang-ku" class="toc-link">设置远程仓库</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#pei-zhi-github-page" class="toc-link">配置 Github Page</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#pei-zhi-github-action" class="toc-link">配置 Github Action</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#zhuan-xie-bo-ke" class="toc-link">撰写博客</a>
                    
                </li>
                
                <li>
                    <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#fqa" class="toc-link">FQA</a>
                    
                    <ul>
                        
                        <li>
                            <a href="https://hi2code.github.io/blog/shi-yong-zolada-jian-bo-ke/#ru-he-yin-yong-tu-pian" class="toc-link">如何引用图片</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
            </ul>
        </nav>
    </div>
</div>


<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog&#x2F;shi-yong-zolada-jian-bo-ke&#x2F;">使用Zola搭建博客</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2021-07-06</span>
            
        </div>
    </header>

    <div class="post-content">
      <h1 id="jie-shao">介绍</h1>
<p>Zola 是rust写的静态网站生成器，可以将组织好的markdown文件，生成出一个静态网页</p>
<h1 id="an-zhuang-zola">安装 Zola</h1>
<p>根据 <a href="https://www.getzola.org/documentation/getting-started/installation/">文档</a> 在本地机器上安装 Zola，</p>
<ul>
<li>
<p>macOS</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> brew install zola
</span></code></pre>
</li>
<li>
<p>Windows平台上推荐使用</p>
<p>下载<a href="https://github.com/getzola/zola/releases">预编译版本</a>，解压后是一个exe文件，放到一个常用路径中，并添加环境变量</p>
</li>
</ul>
<p>安装后，测试是否安装成功</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span>$</span><span style="color:#bf616a;">zola --version
</span><span style="color:#bf616a;">zola</span><span> 0.15.3
</span></code></pre>
<h1 id="chu-shi-hua-xiang-mu">初始化项目</h1>
<p>使用如下命令初始化项目，</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span>$</span><span style="color:#bf616a;">zola</span><span> init blog
</span></code></pre>
<p>可以看到如下项目结构</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">blog
</span><span style="color:#bf616a;">├──</span><span> config.toml </span><span style="color:#65737e;">#配置
</span><span style="color:#bf616a;">├──</span><span> content </span><span style="color:#65737e;">#存放markdown文件
</span><span style="color:#bf616a;">├──</span><span> sass </span><span style="color:#65737e;">#样式
</span><span style="color:#bf616a;">├──</span><span> static </span><span style="color:#65737e;">#静态文件
</span><span style="color:#bf616a;">├──</span><span> templates </span><span style="color:#65737e;">#模板
</span><span style="color:#bf616a;">└──</span><span> themes </span><span style="color:#65737e;">#主题
</span></code></pre>
<h1 id="an-zhuang-zhu-ti">安装主题</h1>
<p>zola 有多款主题，在 <a href="https://www.getzola.org/themes/">主题库</a> 中选择一款喜欢的主题进入它的 Homepage主页，用 git submodule 的方式添加到我们仓库中。</p>
<p>下面以 <a href="https://github.com/getzola/even">even</a> 这款主题为例</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span>$</span><span style="color:#bf616a;">git</span><span> init
</span><span>$</span><span style="color:#bf616a;">git</span><span> submodule add https://github.com/getzola/even.git themes/even
</span></code></pre>
<p>通常主题都有示例文件，在 <code>blog\themes\tale-zola</code> 目录下：</p>
<ul>
<li>将 <code>config.toml.example</code> 文件复制到项目根路径下，并改名为 <code>config.toml</code> ；</li>
<li>将 <code>content</code>文件夹下的所有文件及文件夹，复制到项目根路径的 <code>content</code>文件夹下。</li>
</ul>
<h1 id="ben-di-cha-kan">本地查看</h1>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span>$</span><span style="color:#bf616a;">zola</span><span> serve
</span><span style="color:#bf616a;">Building</span><span> site...
</span><span style="color:#bf616a;">Checking</span><span> all internal links with anchors.
</span><span>&gt; Successfully </span><span style="color:#bf616a;">checked</span><span> 0 internal link(s) </span><span style="color:#bf616a;">with</span><span> anchors.
</span><span style="color:#bf616a;">-</span><span>&gt; Creating 1 pages (0 orphan) </span><span style="color:#bf616a;">and</span><span> 1 sections
</span><span style="color:#bf616a;">Done</span><span> in 155ms.
</span><span>
</span><span style="color:#bf616a;">Web</span><span> server is available at http://127.0.0.1:1024
</span></code></pre>
<p>用浏览器访问链接（上例中为http://127.0.0.1:1024）可以看到最终的博客效果</p>
<h1 id="she-zhi-yuan-cheng-cang-ku">设置远程仓库</h1>
<ol>
<li>
<p>在 GitHub 上建立一个仓库，名为 blog</p>
</li>
<li>
<p>将远程仓库关联到本地仓库，并推送</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">git</span><span> commit</span><span style="color:#bf616a;"> -m </span><span>&quot;</span><span style="color:#a3be8c;">first commit</span><span>&quot;
</span><span style="color:#bf616a;">git</span><span> branch</span><span style="color:#bf616a;"> -M</span><span> main
</span><span style="color:#bf616a;">git</span><span> remote add origin https://github.com/your-github-name/blog.git
</span><span style="color:#bf616a;">git</span><span> push</span><span style="color:#bf616a;"> -u</span><span> origin main
</span></code></pre>
</li>
</ol>
<h1 id="pei-zhi-github-page">配置 Github Page</h1>
<p>在仓库中新建一个gh-pages分支，在setting页面pages选项，配置Source为gh-pages分支</p>
<p><img src="/%E4%BD%BF%E7%94%A8Zola%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2.assets/Github-Page.png" alt="Github-Page" /></p>
<h1 id="pei-zhi-github-action">配置 Github Action</h1>
<p>在项目的<code>.github/workflows</code>目录下，添加一个main.yaml文件，内容如下。可以在我们修改仓库文件后，自动编译部署</p>
<pre data-lang="yaml" style="background-color:#2b303b;color:#c0c5ce;" class="language-yaml "><code class="language-yaml" data-lang="yaml"><span style="color:#65737e;"># On every push this script is executed
</span><span style="color:#d08770;">on</span><span>: [</span><span style="color:#a3be8c;">push</span><span>]
</span><span style="color:#bf616a;">name</span><span>: </span><span style="color:#a3be8c;">Build and deploy GH Pages
</span><span style="color:#bf616a;">jobs</span><span>:
</span><span>  </span><span style="color:#bf616a;">build</span><span>:
</span><span>    </span><span style="color:#bf616a;">runs-on</span><span>: </span><span style="color:#a3be8c;">ubuntu-latest
</span><span>    </span><span style="color:#bf616a;">if</span><span>: </span><span style="color:#a3be8c;">github.ref == &#39;refs/heads/main&#39;
</span><span>    </span><span style="color:#bf616a;">steps</span><span>:
</span><span>      - </span><span style="color:#bf616a;">name</span><span>: </span><span style="color:#a3be8c;">checkout
</span><span>        </span><span style="color:#bf616a;">uses</span><span>: </span><span style="color:#a3be8c;">actions/checkout@v3.0.0
</span><span>      - </span><span style="color:#bf616a;">name</span><span>: </span><span style="color:#a3be8c;">build_and_deploy
</span><span>        </span><span style="color:#bf616a;">uses</span><span>: </span><span style="color:#a3be8c;">shalzz/zola-deploy-action@master
</span><span>        </span><span style="color:#bf616a;">env</span><span>:
</span><span>          </span><span style="color:#65737e;"># Target branch
</span><span>          </span><span style="color:#bf616a;">PAGES_BRANCH</span><span>: </span><span style="color:#a3be8c;">gh-pages
</span><span>          </span><span style="color:#65737e;"># Provide personal access token
</span><span>          </span><span style="color:#bf616a;">TOKEN</span><span>: </span><span style="color:#a3be8c;">${{ secrets.GITHUB_TOKEN }}
</span><span>          </span><span style="color:#bf616a;">BUILD_THEMES</span><span>: </span><span style="color:#d08770;">false
</span></code></pre>
<h1 id="zhuan-xie-bo-ke">撰写博客</h1>
<p>我们的所有markdown文件都放在项目的content路径下。</p>
<p>在 Zola 中有两个概念：</p>
<ul>
<li><a href="https://www.getzola.org/documentation/content/section/">Section</a>：在content目录下包含<code>_index.md</code>的文件夹</li>
<li><a href="https://www.getzola.org/documentation/content/page/">Page</a>：在content目录下的markdown文件</li>
</ul>
<h1 id="fqa">FQA</h1>
<h2 id="ru-he-yin-yong-tu-pian">如何引用图片</h2>
<p><code>content</code>目录中的图片不会被操作，需要将图片放在<code>static</code>目录下。</p>
<p>例如，<code>static/demo/demo.png</code>在markdown文件中引用方式如下（注意：路径需要以<code>/</code>开头）：</p>
<pre data-lang="markdown" style="background-color:#2b303b;color:#c0c5ce;" class="language-markdown "><code class="language-markdown" data-lang="markdown"><span>![demo](/demo/demo.png)
</span></code></pre>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https://hi2code.github.io/blog/tags/rust/">#Rust</a>
                    
                        <a href="https://hi2code.github.io/blog/tags/tool/">#Tool</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;hi2code.github.io&#x2F;blog&#x2F;bashru-men-jiao-cheng&#x2F;">‹ Bash 入门教程</a>
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https://hi2code.github.io/blog/even.js" ></script>
      
    </body>

</html>
